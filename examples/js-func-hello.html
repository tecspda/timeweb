<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Вставка данных в Supabase</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    .d-none {
      display: none;
    }
    .messages {
      font-family: 'Courier New', monospace;
      color: green;
    }
    .red {
      color: red;
    }

  </style>
 </head>
 <body>
  <div class="container mt-5">
    <h1>Пример вызова облачной (serverless) edge функции <code>hello</code></h1>
    <form>
      <div class="mb-3">
        <button type="button" class="btn btn-primary" onclick="callFunction()">Вызвать</button>
      </div>
    </form>
    <div class="messages mt-3"></div>
  </div>

  <script>
    const supabaseUrl = 'http://SERVER_IP:8090';
    const supabaseAnonKey = 'YOU_KEY';
    const supabase_ = supabase.createClient(supabaseUrl, supabaseAnonKey);

    const callFunction = async () => {
      const msg = document.querySelector('.messages');
      msg.innerHTML = '<b>Запрос</b>: Запрашиваем функцию <b>Hello</b><br>';

      const response = await fetch(`${supabaseUrl}/functions/v1/hello`);
      const data = await response.json();
      msg.innerHTML += `<b>Ответ</b>: ${data}`;
    };
  </script>
 </body>
</html>
